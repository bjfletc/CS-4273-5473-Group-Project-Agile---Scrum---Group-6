<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles.css">
    <title> Reviews </title>
  </head>
  <body>
    <div class="topnav">
      <a class ="active" href="home.html">Home</a>
    </div>
    <h1 id="reviewHeader" class="rightText"> Reviews </h1>
    <select name="searchCriteria" id="searchBy">
      <option value="restaurant">Search by Restaurant</option>
      <option value="score">Search by Score</option>
      <option value="content">Search by Content</option>
    </select>
    <input type="text" id="searchBar" placeholder="Search here!">
    <script>
      var input = document.getElementById("searchBar");
      input.addEventListener("keyup", function () {
        var a = document.getElementById("searchBy").value;
        reviewSearch(a);
      });

    </script>
    <h2 id="recentReviewHeader">Recent Reviews</h2>
    <table id="reviewTable" style ="width: 100%">
      <colgroup id="colGroup">
        <col id="restCol" span="1">
        <col id="scoreCol" span="1">
        <col id="contentCol" span="1">
      </colgroup>
      <tr>
        <tr>
          <th align="left">Restaurant</th>
          <th align="left">Score</th>
          <th align="left">Content</th>
        </tr>
        <tr>
          <td>Peter's Pizza Palace</td>
          <td>4</td>
          <td>Pretty great experience! The only complaint I had was that the food took a bit long. Even so, they were very apologetic when this happened. Great otherwise!</td>
        </tr>
        <tr>
          <td>Bob's Brilliant Burger House</td>
          <td>5</td>
          <td>Absolutely no complaints! Excellent service and food</td>
        <tr>
          <td>Luke's Fake Restaurant</td>
          <td>0</td>
          <td>The restaurant doesn't exist... so can't really review it can I?</td>
        </tr>
        <tr>
          <td>Marley's Magnificent Mangos</td>
          <td>3</td>
          <td>Good but not great... I've definitely had better</td>
        </tr>
        <tr>
          <td>Nick's Nonchalant Nuggets</td>
          <td>5</td>
          <td>Incredible! Beats McDonald's for sure!</td>
        </tr>
        <tr>
          <td>Carly's Competent Cereal</td>
          <td>3</td>
          <td>It's in the name, and is why my review is mid-tier... competent.</td>
        </tr>
        <tr>
          <td>Quentin's Quiet Quail</td>
          <td>4</td>
          <td>Quiet? More like quietly good! This quail really hit the spot, and more people definitely need to check it out.</td>
        </tr>
      </table>
  </body>
  <script>
  function reviewSearch(selection) {
    var input, filter, table, row, data, i, searchValue, s;
    if (selection === "restaurant") {s = 0;}
    else if (selection === "score") {s = 1;}
    else if (selection === "content") {s = 2;}
    input = document.getElementById("searchBar");
    filter = input.value.toUpperCase();
    table = document.getElementById("reviewTable");
    row = table.getElementsByTagName("tr");

    //Looping through all of our table rows and hiding those that don't match the search!
    for(i=0; i < row.length; i++){
      data = row[i].getElementsByTagName("td")[s];
      if (data) {
        searchValue = data.textContent || td.innerText;
        if (searchValue.toUpperCase().indexOf(filter) > -1) {
          row[i].style.display = "";
        }
        else{
          row[i].style.display = "none";
        }
      }
    }
  }
</script>
</html>
